---
title: '前段安全问题二'
date: 2017-11-14 16:44:29
tags: html
categories: html
---
继续上一篇我们来谈的前端安全问题。

##### Iframe带来的风险

有的时候我们需要引入第三方插件，比如天气预报、社交插件。这些插件往往是通过iframe标签来进行引入的。iframe给我们提供了方便，同时也带来了隐患。在iframe中的脚步，样式都不能被我们所控制，所以有可能会影响到前端用户的体验。
在我们引入的第三方域名，有可能过期被其他恶意攻击者抢注，或被黑客入侵。那对我们的危害可就不只是用户体验的问题了。

##### 如何防御呢

HTML5对iframe 新增了一个sandbox的安全属性，可以通过它对iframe的权限做各种限制。

```
<iframe src='' sandbox=""></iframe>
```

如果设置参数为空或者不设置,浏览器会对iframe做最大的限制，只能渲染静态页面，不能运行脚步、不能出现弹框。

sandbox也有丰富的参数。
allow-from 允许iframe提交form表单。
allow-popups 允许iframe 弹出新窗口或者标签页面。
allow-scripts 允许iframe执行JavaScript。
allow-same-origin 允许iframe开启同源策略。

##### 点击劫持

我们有时候要防着第三方的iframe,同时也要防着别人用我们的iframe。
点击劫持是一种欺骗性比较强,需要用户高度参与的攻击。通常攻击的步骤是：
1. 攻击者构造一个诱导用户点击的页面，比如web小游戏。
2. 将我们的页面用iframe 嵌套进入，层级在游戏页面之下并设置为透明。
3. 用户表面上是在做游戏，实际上是在点击我们的页面。

##### 如何防御

网上有许多防止页面被点击劫持的方案。比如frame breaking方案。有大神推荐用 X-Frame-Option:DENY这个Http header 来告知浏览器不要把http响应的内容在iframe中显示出来。
